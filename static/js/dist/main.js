(()=>{function h(s){console.log("[\u{1F320} initStarfield] Running on:",s);let e=document.getElementById(s);if(console.log("[\u{1F30C} canvas]",e),!e||!e.getContext)return null;let t=e.getContext("2d"),c=[],i;function o(){e.width=e.offsetWidth,e.height=e.offsetHeight;let n=Math.floor(e.width*e.height/8e3);c=Array.from({length:n},()=>({x:Math.random()*e.width,y:Math.random()*e.height,r:Math.random()*1.2+.3,alpha:Math.random(),delta:Math.random()*.02+.005}))}function a(){t.clearRect(0,0,e.width,e.height),c.forEach(n=>{n.alpha+=n.delta,(n.alpha<=0||n.alpha>=1)&&(n.delta*=-1),t.globalAlpha=n.alpha,t.beginPath(),t.arc(n.x,n.y,n.r,0,2*Math.PI),t.fillStyle="#ffffff",t.fill()}),t.globalAlpha=1,i=requestAnimationFrame(a)}return o(),a(),window.addEventListener("resize",o),()=>{cancelAnimationFrame(i),window.removeEventListener("resize",o)}}function f(){let s=["XSS","Injection","Misconfig","Race Condition","Other"],e=document.getElementById("tagFilters"),t=document.getElementById("sortSelect"),c=localStorage.getItem("activeTag"),i=localStorage.getItem("sortOrder");s.forEach(o=>{let a=document.createElement("button");a.textContent=`#${o}`,a.setAttribute("role","radio"),a.setAttribute("aria-checked","false"),a.className="px-3 py-1 rounded-md border border-orangeLuxe text-orangeLuxe hover:bg-orangeLuxe hover:text-black text-xs transition",c===o&&a.classList.add("bg-orangeLuxe","text-black"),a.addEventListener("click",()=>{e.querySelectorAll("button").forEach(n=>n.setAttribute("aria-checked","false")),a.setAttribute("aria-checked","true"),localStorage.setItem("activeTag",o),document.querySelectorAll(".report-card").forEach(n=>{let l=n.dataset.tags?.toLowerCase().includes(o.toLowerCase());n.style.display=l?"":"none"}),window.forgeToast(`\u{1F50D} Filtered by #${o}`,"info"),console.log(`[\u{1F9E0} GPT] Filtered by tag: ${o}`)}),e.appendChild(a)}),t&&i&&(t.value=i),t?.addEventListener("change",()=>{let o=t.value;localStorage.setItem("sortOrder",o),window.forgeToast(`\u{1F9EE} Sorted: ${o}`,"info"),console.log(`[\u{1F4CA} SORT] Active sort: ${o}`)})}var m=document.getElementById("aiSummaryBox");m&&(m.textContent=`\u{1F9E0} GPT summary: Here\u2019s what we know about #${tag}\u2026`);f();document.addEventListener("DOMContentLoaded",()=>{h("heroStarfield")});window.confettiBurst=function(s,e=18){let t=document.createElement("div");t.className="confetti-burst";for(let c=0;c<e;c++){let i=document.createElement("span");i.style.left=50+30*Math.cos(2*Math.PI*c/e)+"%",i.style.top=50+30*Math.sin(2*Math.PI*c/e)+"%",t.appendChild(i)}(s||document.body).appendChild(t),setTimeout(()=>t.remove(),1200)};window.forgeToast=function(s,e="info",t=2800){let c=document.createElement("div");c.className=`toast toast--${e}`,c.textContent=s,document.body.appendChild(c),setTimeout(()=>c.classList.add("hide"),t-400),setTimeout(()=>c.remove(),t)};window.forgePalette=(s={})=>{let e=document.getElementById("forge-command-palette");e||(e=document.createElement("div"),e.id="forge-command-palette",e.innerHTML='<div class="fixed inset-0 z-[9999] bg-black/70 backdrop-blur flex items-start justify-center pt-32 transition-all"><div class="bg-zinc-900 border border-orangeLuxe/40 rounded-2xl shadow-xl w-full max-w-md mx-auto"><input autofocus id="forge-cmd-in" type="text" autocomplete="off" placeholder="Type a command\u2026" class="w-full px-5 py-4 bg-zinc-900/80 text-lg text-orange-200 outline-none rounded-t-2xl font-mono tracking-wide"/><ul id="forge-cmd-list" class="divide-y divide-zinc-800"></ul><div class="text-xs p-3 text-zinc-400 font-mono text-center border-t border-orangeLuxe/10">ESC to close \u2022 \u2191\u2193 to move \u2022 Enter to run</div></div></div>',document.body.appendChild(e));let t=e.querySelector("#forge-cmd-in"),c=e.querySelector("#forge-cmd-list"),i=s.items||[{label:"Home",action:()=>window.location.href="/"},{label:"Search",action:()=>document.getElementById("searchBtn")?.click()},{label:"Toggle Theme",action:()=>document.getElementById("themeToggle")?.click()},{label:"Ghost Mode",action:()=>window.dispatchEvent(new KeyboardEvent("keydown",{ctrlKey:!0,key:"m"}))},{label:"Dashboard",action:()=>window.location.href="/dashboard"},{label:"Playground",action:()=>window.location.href="/playground"}],o=i,a=0;function n(){c.innerHTML="",o.forEach((r,u)=>{let d=document.createElement("li");d.textContent=r.label,d.className="px-5 py-3 cursor-pointer "+(u===a?"bg-orangeLuxe/20 text-orange-300":"hover:bg-zinc-800"),d.onclick=()=>{r.action(),l()},c.appendChild(d)})}function l(){e.remove()}function g(r){o=i.filter(u=>u.label.toLowerCase().includes(r.toLowerCase())),a=0,n()}t.oninput=r=>g(r.target.value),t.onkeydown=r=>{r.key==="ArrowDown"?(a=(a+1)%o.length,n()):r.key==="ArrowUp"?(a=(a-1+o.length)%o.length,n()):r.key==="Enter"?(o[a]?.action(),l()):r.key==="Escape"&&l()},n(),t.focus()};window.addEventListener("keydown",s=>{(s.ctrlKey||s.metaKey)&&s.key.toLowerCase()==="k"&&(s.preventDefault(),window.forgePalette())});})();
