(()=>{document.addEventListener("DOMContentLoaded",()=>{let u=document.createElement("div");u.id="warp-overlay",document.body.prepend(u),window.AOS&&AOS.init({offset:120,delay:100,duration:600,easing:"ease-in-out",once:!0,mirror:!1});let g=document.getElementById("scrollProgress"),f=document.getElementById("siteHeader"),y=L(()=>{let e=window.scrollY,t=document.body.scrollHeight-window.innerHeight;g&&(g.style.transform=`scaleX(${t>0?e/t:0})`),f&&f.classList.toggle("scrolled",e>50)},16);document.addEventListener("scroll",y),y();let c={click:new Audio("/static/sfx/keyboard-clack.mp3"),unlock:new Audio("/static/static/sfx/vhs-unlock.mp3"),swoosh:new Audio("/static/sfx/swoosh.mp3"),breach:new Audio("/static/sfx/breach.mp3")};Object.values(c).forEach(e=>e.volume=.15),document.addEventListener("click",e=>{let t=e.target;t.closest(".vault-popup-trigger")?c.unlock.play():t.matches("a, .report-card, button")?c.click.play():t.closest("#themeToggle")&&c.swoosh.play()});let p=document.getElementById("themeToggle"),r=document.documentElement,w=document.body,d=e=>{r.dataset.theme=e,localStorage.setItem("theme",e)},m=e=>{let t=e?"true":"false";r.dataset.ghostMode=t,w.dataset.ghostMode=t,localStorage.setItem("ghost",t)};d(localStorage.getItem("theme")||"dark"),m(localStorage.getItem("ghost")==="true"),p&&(p.addEventListener("click",()=>{let e=r.dataset.theme==="dark"?"light":"dark";d(e)}),window.addEventListener("keydown",e=>{if(e.ctrlKey&&e.key.toLowerCase()==="m"){let t=prompt("Enter theme mode (dark, light, ghost, infrared):");t&&(t==="ghost"?m(!0):(m(!1),d(t==="infrared"?"infrared":t)))}}));let n=document.getElementById("vaultStatusLive");if(n&&location.protocol.startsWith("http")){let e,t=()=>{let a=location.protocol==="https:"?"wss":"ws";e=new WebSocket(`${a}://${location.host}/ws/status`),e.onmessage=({data:s})=>{n.textContent=`Vault: ${s}`,n.classList.toggle("bg-green-600",s==="LIVE"),n.classList.toggle("bg-red-600",s!=="LIVE")},e.onclose=()=>{n.textContent="Disconnected",n.classList.remove("bg-green-600"),n.classList.add("bg-red-600"),setTimeout(t,3e3)}};t()}let l=document.getElementById("bootloader"),h=document.getElementById("bootLines");if(l&&h){let s=function(){let o=document.createElement("div");o.className="post-boot-cursor",o.textContent="~$",document.body.appendChild(o)},e=["[0.00] Initializing CYBERKIDZSEC Vault System...","[0.21] Engaging Ghost Mode Subsystems...","[0.34] \u26A0\uFE0F Memory Leak Detected in Sector 7G","[0.42] HUD Interface Compiled.","#!@% Error: /dev/null overflow","[0.73] Authenticating Operative: \u{1F9E0} Codebreaker","[0.91] \u{1F6A8} Subspace Trace Signal Detected","[1.04] Neural Sync Lock Established.","SYSTEM: Breach Protocols Engaged...","[1.48] Vault Stability: \u2714 Stable","[2.00] \u2705 WARP MODE Online \u2014 Stay Ghosted. \u{1F480}"],t=o=>o.includes("ERROR")||o.includes("\u26A0\uFE0F")||o.includes("Trace")?"error":o.includes("#!@%")||o.includes("Breach")?"glitch":o.includes("\u2714")||o.includes("\u2705")?"success":"";h.innerHTML="",e.forEach((o,S)=>{let i=document.createElement("span");i.textContent=o,i.classList.add("line");let b=t(o);b&&i.classList.add(b),setTimeout(()=>h.appendChild(i),S*300)});let a=e.length*300+1e3;setTimeout(()=>{l.classList.add("hidden"),document.body.classList.remove("no-scroll"),s()},a),l.addEventListener("click",()=>{l.classList.add("hidden"),document.body.classList.remove("no-scroll"),s()}),document.addEventListener("keydown",o=>{o.key==="Escape"&&(l.classList.add("hidden"),document.body.classList.remove("no-scroll"),s())})}let v=document.getElementById("ghostBreachWarning"),E=document.getElementById("footer");if(v&&E){let e=parseInt(E.dataset.vaultStability||"100",10);document.body.dataset.ghostMode==="true"&&e<50&&(v.style.display="block",c.breach.play().catch(()=>{}),document.body.classList.add("glitch"),setTimeout(()=>document.body.classList.remove("glitch"),2e3))}function L(e,t){let a=0;return(...s)=>{let o=Date.now();o-a>t&&(a=o,e(...s))}}});})();
