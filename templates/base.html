<!-- base.html -->
<!doctype html>
<html lang="en" class="scroll-smooth" data-theme="dark">
<head>
  <!-- 🌐 Core Meta -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="theme-color" content="#0f172a">
  <meta name="description" content="{% block meta_desc %}CYBERKIDZSEC — Zero-Day Vault.{% endblock %}">
  <meta name="robots" content="index, follow">
  <title>{% block title %}CYBERKIDZSEC Vault{% endblock %}</title>

  <!-- 🔌 PWA Support -->
  <link rel="manifest" href="{{ url_for('static', filename='manifest.json') }}">
  <meta name="apple-mobile-web-app-capable" content="yes">

  <!-- 🖼 Favicons -->
  <link rel="icon" type="image/png" sizes="32x32" href="{{ url_for('static', filename='favicon-32.png') }}">
  <link rel="icon" type="image/png" sizes="16x16" href="{{ url_for('static', filename='favicon-16.png') }}">
  <link rel="apple-touch-icon" href="{{ url_for('static', filename='apple-touch-icon.png') }}">

  <!-- 🌐 Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com" crossorigin>
  <link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">

  <!-- 🧠 Social Meta -->
  <meta property="og:title" content="{% block og_title %}CYBERKIDZSEC Vault{% endblock %}">
  <meta property="og:description" content="{% block og_desc %}Hack the future…{% endblock %}">
  <meta property="og:url" content="{{ request.url_root }}">
  <meta property="og:image" content="{{ url_for('static', filename='images/og/main_vault_banner.png') }}">
  <meta name="twitter:card" content="summary_large_image">

  <!-- 🎨 Core Styles -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/app.min.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/hero.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/ghost-mode.css') }}">
  <link rel="stylesheet" href="{{ url_for('static', filename='css/ghost-boot.css') }}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer">
  <link rel="stylesheet" href="https://unpkg.com/aos@2.3.4/dist/aos.css">

  <!-- 🔊 Preload SFX -->
  {% for fx in ['keyboard-clack.mp3','vhs-unlock.mp3','swoosh.mp3','breach.mp3'] %}
    <link rel="preload" as="audio" href="{{ url_for('static', filename='sfx/' + fx) }}">
  {% endfor %}

  {% block head_extra %}{% endblock %}

  <noscript><style>.aos-init[data-aos]{opacity:1!important;transform:none!important;}</style></noscript>
</head>

<body class="bg-cyberNight text-zinc-100 antialiased flex flex-col min-h-screen">

  <!-- Accessibility -->
  {% include "components/skip_nav.html" %}

  <!-- Operative Badge -->
  <p class="text-orange-400 text-sm text-center font-bold uppercase mb-4 tracking-wider">
    {{ operative_title }}
  </p>

  <!-- Header -->
  {% include "components/header.html" %}

  <!-- Scroll Progress -->
  <div id="scrollProgress" class="scroll-progress"></div>

  <!-- Main Content -->
  <main id="main" class="flex-1">
    {% block content %}{% endblock %}
  </main>

  <!-- Modals & Overlays -->
  {% include "components/vault_popup.html" %}
  {% include "components/quick_view_modal.html" %}
  {% include "components/hud_toolbar.html" %}
  {% include "components/command_palette.html" %}

  <!-- Footer & Back to Top -->
  {% include "components/footer.html" %}
  {% include "components/back_to_top.html" %}

  <!-- ⚙️ Scripts -->
  <script src="{{ url_for('static', filename='js/app.min.js') }}" defer></script>
  <script type="module" src="{{ url_for('static', filename='js/main.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/ghost-mode.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/cyber-enhancements.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/init.js') }}" defer></script>
  <script src="https://unpkg.com/aos@2.3.4/dist/aos.js" defer></script>
  <script>AOS.init({ duration:800, easing:"ease-in-out", once:true, mirror:false, offset:120 });</script>

  <!-- Service Worker -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('/sw.js').catch(e => console.warn('SW failed:', e));
      });
    }
  </script>

  {% block scripts_extra %}{% endblock %}
  {% if config['ENV']=='production' %}
    <script defer data-domain="cyberkidzsec.com" src="https://plausible.io/js/script.js"></script>
  {% endif %}
</body>
</html>
