<!-- üîê Report Grid Section -->
<section id="vault-feed" aria-labelledby="reports-heading" class="container mx-auto my-16 px-6">
  <h2 id="reports-heading" class="sr-only">Bug Reports</h2>

  <div id="dynamicGrid"
       class="report-grid grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8"
       data-aos="fade-up"
       role="region"
       aria-live="polite"
       aria-busy="false">
  </div>
</section>

<script>
  const LIST = window.FILTERED_REPORTS || [];
  const wrap = document.getElementById("dynamicGrid");
  wrap.setAttribute("aria-busy", "true");

  const cvssColor = (v) => {
    if (typeof v !== "number") return "text-zinc-400";
    return v >= 9 ? "text-red-400"
         : v >= 7 ? "text-orange-400"
         : v >= 4 ? "text-yellow-400"
         : "text-emerald-400";
  };

  if (!LIST.length) {
    wrap.innerHTML = `
      <div class="col-span-full text-center text-zinc-400 py-12">
        <p class="text-xl font-semibold mb-2">‚ö†Ô∏è No reports match your filters.</p>
        <p class="text-sm">Try adjusting tags or sort order to see more results.</p>
      </div>`;
  } else {
    const cards = LIST.map((r, i) => {
      const date = new Date(r.date).toLocaleDateString("en-US", {
        year: "numeric", month: "short", day: "numeric"
      });
      const delay = i * 75;

      return `
        <a href="/reports/${r.slug}"
           class="group rounded-xl overflow-hidden border border-zinc-800 bg-zinc-900/70 shadow-md transition-all hover:shadow-lg hover:scale-[1.02] focus:outline-none focus:ring-2 focus:ring-orangeLuxe ring-offset-2"
           data-aos="fade-up"
           data-aos-delay="${delay}"
           aria-label="View report: ${r.title}">

          <div class="p-5 space-y-2">
            <h3 class="text-lg font-semibold text-orangeLuxe group-hover:underline">${r.title}</h3>
            <time datetime="${r.date}" class="block text-xs text-zinc-400 uppercase tracking-wide">
              ${date}
            </time>
            <p class="text-sm text-zinc-300 line-clamp-3">${r.summary || "No summary provided."}</p>

            <div class="flex justify-between items-center pt-3 text-xs font-mono uppercase tracking-wide">
              <span class="report-cvss ${cvssColor(r.cvss)}">CVSS: ${typeof r.cvss === "number" ? r.cvss.toFixed(1) : "N/A"}</span>
              <span class="text-zinc-400">${r.reportType}</span>
            </div>
          </div>
        </a>`;
    }).join("");

    wrap.innerHTML = cards;
  }

  wrap.setAttribute("aria-busy", "false");
</script>

