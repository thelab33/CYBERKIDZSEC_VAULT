{# templates/components/hud_status.html — Enhanced HUD Status Badge 🌠 #}

<section id="vault-hud-status" aria-label="Vault System Status" class="w-full my-12">
  <div id="hudBadge"
       class="relative mx-auto w-fit bg-zinc-900/90 backdrop-blur-sm text-orange-400 text-xs sm:text-sm font-mono
              px-4 py-2 rounded-xl shadow-2xl z-10 flex flex-wrap justify-center items-center gap-x-3 gap-y-1
              border border-orange-500/10 ring-1 ring-orange-400/20 animate-fade-in"
       role="status" aria-live="polite">

    <span>👻 Ghost Mode: <strong id="hudGhostStatus" class="text-white">Loading…</strong></span>
    <span class="hidden sm:inline">·</span>
    <span>🔓 Admin: <strong id="hudAdminStatus" class="text-white">Loading…</strong></span>
    <span class="hidden sm:inline">·</span>
    <span>🛰️ Feed: <strong id="hudFeedStatus" class="text-emerald-400">Connecting…</strong></span>
    <span class="hidden sm:inline">·</span>
    <span>📊 Vault: <strong>{{ vault_xp_percentage }}%</strong></span>

    <div id="hudTooltip"
         class="absolute -top-10 right-0 text-[10px] text-orange-300 font-mono bg-zinc-800/90
                px-3 py-1 rounded shadow-md hidden sm:block"
         aria-hidden="true">
      HUD Systems Verified · All Clear
    </div>
  </div>

  <div id="vaultXpBar"
       class="mt-2 h-1 w-full max-w-4xl mx-auto bg-black/30 backdrop-blur-sm rounded overflow-hidden">
    <div class="h-full bg-gradient-to-r from-orange-400 to-emeraldLuxe transition-all duration-700 ease-out"
         style="width: {{ vault_xp_percentage }}%">
    </div>
  </div>
</section>

<style>
  #hudBadge::before {
    content: "";
    position: absolute;
    inset: 0;
    border-radius: 0.75rem;
    box-shadow: 0 0 24px rgba(255,127,0,0.15);
    animation: hudPulse 3s ease-in-out infinite;
    z-index: -1;
  }

  @keyframes hudPulse {
    0%, 100% { opacity: 0.25; transform: scale(1); }
    50%      { opacity: 0.5; transform: scale(1.03); }
  }
</style>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    const ghost = localStorage.getItem('ghost') === 'true';
    const admin = localStorage.getItem('admin') === 'true';

    document.getElementById('hudGhostStatus').textContent = ghost ? 'ACTIVE' : 'OFF';
    document.getElementById('hudAdminStatus').textContent = admin ? 'ENGAGED' : 'OFF';

    const ws = new WebSocket((location.protocol === 'https:' ? 'wss://' : 'ws://') + location.host + '/ws/status');

    ws.onmessage = ({ data }) => {
      document.getElementById('hudFeedStatus').textContent = data;
    };

    ws.onclose = () => {
      document.getElementById('hudFeedStatus').textContent = 'OFFLINE';
    };
  });
</script>

