{% extends "base.html" %}

{% block title %}{{ report.title }} Â· CYBERKIDZSEC{% endblock %}

{% block breadcrumbs %}
  {% include "components/breadcrumbs.html" %}
  <script>
    renderBreadcrumbs([
      { label: "Home", href: "/" },
      { label: "Reports", href: "/reports" },
      { label: {{ report.title|tojson }} }
    ]);
  </script>
{% endblock %}

{% block content %}
<article class="prose dark:prose-invert max-w-4xl mx-auto py-10 px-6 space-y-8" data-aos="fade-up">

  <h1 class="text-4xl font-extrabold">{{ report.title }}</h1>

  <div class="flex flex-wrap gap-4 text-sm text-orangeLuxe-light/70 font-mono uppercase tracking-wide">
    <time datetime="{{ report.date }}">{{ report.date|datetimeformat }}</time>
    <span>{{ report.type }}</span>
    <span>CVSS {{ report.cvss }}</span>
  </div>

  <div class="flex flex-wrap gap-2 my-4">
    {% for t in report.tags %}
      <a href="{{ url_for('views.reports_list') }}?tag={{ t }}"
         class="badge hover:bg-orangeLuxe transition">{{ t }}</a>
    {% endfor %}
  </div>

  {{ body_html|safe }}

  <!-- ðŸ”¬ Enhanced Report Chart -->
  <section aria-labelledby="chart-section" class="mt-12">
    <h2 id="chart-section" class="text-2xl font-semibold mb-4">Severity Breakdown</h2>
    {% include "components/report_chart.html" %}
  </section>

</article>
{% endblock %}

{% block scripts_extra %}
  <script src="{{ url_for('static', filename='js/report-detail.js') }}" defer></script>
{% endblock %}

