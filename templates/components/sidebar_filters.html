<!-- templates/components/sidebar_filters.html -->
<aside class="space-y-4 bg-cyberNightGlow p-5 rounded-2xl shadow-inner" id="sideFilter" data-aos="fade-up">
  <input type="search" id="tagSearch" placeholder="Search tags..."
    class="w-full px-4 py-2 rounded-md bg-zinc-800 text-orangeLuxe-light text-sm placeholder-orangeLuxe-light/50 focus:ring-2 focus:ring-orangeLuxe">

  <div id="tagList" class="max-h-64 overflow-y-auto pr-1 space-y-2"></div>
</aside>

<script>
const TAGS_ALL = TAGS;    // reuse global tag list
const out = document.getElementById("tagList");
const search = document.getElementById("tagSearch");
let selected = null;

function draw(list) {
  out.innerHTML = "";
  list.forEach(t => {
    const btn = document.createElement("button");
    btn.textContent = "#" + t;
    btn.className = `block w-full text-left px-4 py-2 rounded font-mono text-sm ${
      t === selected
        ? "bg-orangeLuxe text-black font-bold"
        : "text-orangeLuxe-light hover:bg-orangeLuxe/10"
    } transition-all`;
    btn.onclick = () => {
      selected = t;
      draw(filter(search.value));
      out.dispatchEvent(new CustomEvent("tagselect", { detail: { tag: t } }));
    };
    out.appendChild(btn);
  });
}

function filter(q) {
  return TAGS_ALL.filter(t => t.toLowerCase().includes(q.toLowerCase()));
}

search.oninput = () => draw(filter(search.value));
draw(TAGS_ALL);
</script>

