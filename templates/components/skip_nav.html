<!-- üöÄ Forgemaster Tier Skip Navigation -->
<div id="skipBar"
     class="fixed top-0 left-0 right-0 z-[9998] flex items-center justify-between
            bg-gradient-to-r from-green-400 via-cyan-400 to-green-400
            p-3 text-black font-mono text-sm uppercase tracking-wider shadow-xl
            transform -translate-y-40 transition-transform duration-500 ease-out pointer-events-none"
     role="navigation" aria-label="Skip Navigation Bar">

  <!-- üåå Warp Mode Title -->
  <div id="warpText"
       class="absolute top-0 inset-x-0 text-center text-green-400 font-black tracking-widest
              text-lg mix-blend-difference opacity-0 scale-90 -translate-y-1/2
              transition-all duration-500 ease-in-out glitch-flicker shake-on-show">
    WARP MODE ENGAGED
  </div>

  <!-- üß≠ Skip Links -->
  <div class="flex gap-6 space-y-4">
    <a href="#main"
       class="hover:underline focus-visible:ring-2 focus-visible:ring-black rounded px-2 py-1 space-y-4">
      Skip to Main
    </a>
    <a href="#footer"
       class="hover:underline focus-visible:ring-2 focus-visible:ring-black rounded px-2 py-1 space-y-4">
      Skip to Footer
    </a>
  </div>

  <!-- ‚ùå Close Button -->
  <button id="skipBarClose"
          aria-label="Close Skip Navigation"
          class="rounded-full bg-black text-green-400 hover:bg-green-400 hover:text-black transition p-2 focus-visible:ring-2 focus-visible:ring-black space-y-4">
    ‚úñÔ∏è
  </button>

  <!-- üéâ Confetti Canvas -->
  <canvas id="confettiCanvas" class="absolute inset-0 pointer-events-none space-y-4"></canvas>
</div>

<!-- üé® Styles -->
<style>
  .glitch-flicker {
    animation: cyberpunkFlicker 2.5s infinite alternate;
  }

  .shake-on-show {
    animation: shake 0.6s ease-in-out;
  }

  @keyframes cyberpunkFlicker {
    0%, 100% { opacity: 0.85; text-shadow: 0 0 1px lime; }
    25% { opacity: 0.95; text-shadow: 0 0 4px cyan; }
    50% { opacity: 1; text-shadow: 0 0 6px hotpink; }
    75% { opacity: 0.9; text-shadow: 0 0 3px white; }
  }

  @keyframes shake {
    0%, 100% { transform: translateX(0); }
    20%, 60% { transform: translateX(-4px); }
    40%, 80% { transform: translateX(4px); }
  }

  canvas#confettiCanvas { z-index: 9997; pointer-events: none; }
</style>

<!-- üß† Logic -->
<script>
(() => {
  const skipBar = document.getElementById("skipBar");
  const warpText = document.getElementById("warpText");
  const closeBtn = document.getElementById("skipBarClose");
  const confettiCanvas = document.getElementById("confettiCanvas");
  let confetti;

  function showSkipBar() {
    skipBar.classList.remove("-translate-y-40", "pointer-events-none");
    skipBar.classList.add("translate-y-0");
    warpText.classList.remove("opacity-0", "scale-90", "-translate-y-1/2");
    warpText.classList.add("opacity-100", "scale-100", "translate-y-0");

    // play warp sound
    new Audio('/static/audio/warp-sound.mp3').play().catch(() => {});

    // confetti (uses ConfettiGenerator or fallback to canvas-confetti)
    if (window.ConfettiGenerator) {
      confetti = new ConfettiGenerator({ target: confettiCanvas, max: 80 });
      confetti.render();
    }

    // hide glitch title after 1.5s
    setTimeout(() => {
      warpText.classList.add("opacity-0", "scale-90", "-translate-y-1/2");
      warpText.classList.remove("opacity-100", "scale-100", "translate-y-0");
    }, 1500);

    // auto focus first skip link
    setTimeout(() => document.querySelector("#skipBar a")?.focus(), 400);
  }

  function hideSkipBar() {
    skipBar.classList.add("-translate-y-40", "pointer-events-none");
    skipBar.classList.remove("translate-y-0");
    if (confetti?.clear) confetti.clear();
  }

  // keyboard triggers
  window.addEventListener("keydown", (e) => {
    if ((e.metaKey || e.ctrlKey) && e.key === "ArrowUp") {
      e.preventDefault();
      showSkipBar();
    }
    if (e.key === "Escape") hideSkipBar();
  });

  // close button
  closeBtn.addEventListener("click", hideSkipBar);
})();
</script>

