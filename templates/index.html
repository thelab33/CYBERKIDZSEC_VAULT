{# templates/index.html #}
{% extends "base.html" %}

{% block title %}Home · CYBERKIDZSEC Vault{% endblock %}

{% block head_extra %}
  {{ super() }}
  {% set extra_styles = [
    'sections/vault_overview.css',
    'sections/featured_reports.css',
    'sections/report_grid.css',
    'sections/filter_bar.css',
    'sections/pagination.css',
    'sections/sidebar_filters.css',
    'sections/sidebar_cta.css',
    'sections/empty_state.css',
    'sections/report_charts_grid.css',
    'sections/tags_section.css',
    'sections/related_reports.css',
    'sections/hacker_playground.css',
    'components/hero.css',
    'components/terminal_scan.css',
    'components/hud_status.css'
  ] %}
  {% for sheet in extra_styles %}
    <link rel="stylesheet" href="{{ url_for('static', filename='css/' ~ sheet) }}" crossorigin />
  {% endfor %}
{% endblock %}

{% block content %}
  {# 🌌 Console + Hero #}
  <section class="overflow-hidden relative">
    {% include "components/console.html" %}
    {% include "components/hero.html" %}
    {% include "components/bug_tales.html" %}
    {% include "components/report_card_grid.html" %}
    {% include "components/report_chart.html" %}
    {% include "components/scroll_progress.html" %}
  </section>

  {# 🛰️ Status Strip #}
  <section id="vault-status" class="w-full bg-zinc-900/60 backdrop-blur py-3 shadow-lg" aria-live="polite">
    <div class="max-w-7xl mx-auto text-center text-sm sm:text-base font-mono text-orange-400 uppercase tracking-wider animate-pulse">
      Zero-Day Archive Updating · Stay Ghosted
    </div>
  </section>

  {# 🔐 XP & About Section #}
  <section class="max-w-7xl mx-auto px-6 space-y-12">
    {% include "components/vault_overview.html" %}
    {% include "components/vault_banners.html" %}
    {% include "components/vault_xp_bar.html" %}
    {% include "components/blog_section.html" %}
    {% include "components/about_section.html" %}
  </section>

  {# 📂 Reports Grid + Filters #}
  <section id="vault-feed" class="max-w-7xl mx-auto px-6 grid grid-cols-1 lg:grid-cols-4 gap-12">
    <aside class="space-y-8 lg:sticky lg:top-24" role="complementary">
      {% include "components/filter_bar.html" %}
      {% include "components/sidebar_filters.html" %}
      {% include "components/sidebar_cta.html" %}
    </aside>

    <div class="lg:col-span-3 space-y-14" role="region" aria-labelledby="reports-heading">
      <h2 id="reports-heading" class="sr-only">Reports & Analytics</h2>
      {% include "components/featured_reports.html" %}
      {% include "components/report_grid.html" %}
      {% include "components/empty_state.html" %}
      {% include "components/pagination.html" %}
      {% include "components/report_charts_grid.html" %}
      {% include "components/tags_section.html" %}
      {% include "components/related_reports.html" %}
    </div>
  </section>

  {# 🎮 Playground #}
  <section class="max-w-7xl mx-auto px-6 py-20 text-center rounded-3xl border border-orangeLuxe/30 backdrop-blur-lg bg-gradient-to-br from-cyberNight via-cyberNightGlow to-cyberNightPhantom shadow-2xl">
    {% include "components/hacker_playground.html" %}
  </section>

  {# 🧠 HUD Layer #}
  <section class="fixed bottom-0 right-0 p-6 space-y-6 pointer-events-none z-[999]">
    {% include "components/terminal_scan.html" %}
    {% include "components/hud_status.html" %}
  </section>
{% endblock %}

{% block scripts_extra %}
  {{ super() }}
  <script src="{{ url_for('static', filename='js/console.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/hero_starfield_debug.js') }}" defer></script>
  <script src="{{ url_for('static', filename='js/vault_overview.js') }}" defer></script>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      if (window.PAGE_REPORTS?.length < 3) {
        document.getElementById("vault-feed")?.classList.add("opacity-60");
      }
    });
  </script>
{% endblock %}

